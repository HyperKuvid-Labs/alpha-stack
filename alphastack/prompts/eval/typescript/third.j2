Real-Time Collaborative Document Engine (CRDT)
Build operational transformation or CRDT-based document sync supporting text, rich formatting, and nested data structures. Implement Yjs-like algorithms with conflict resolution, support undo/redo with time-travel, and provide awareness for cursor positions. Use WebSockets with binary protocol (MessagePack), implement snapshot compression, and sync with IndexedDB for offline support.

Key Features: Recursive type definitions for document tree, type-level state machines, intersection types for operation types, branded primitives for node IDs, generator functions for traversal, weak maps for metadata

